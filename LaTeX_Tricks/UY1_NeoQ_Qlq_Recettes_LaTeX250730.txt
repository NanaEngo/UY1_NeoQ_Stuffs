% ======================================================
% EXEMPLE PRÉAMBULE LaTeX - Bonnes pratiques 2025
% ======================================================

%%% Tous ces paquets (packages) ne sont pas utiles en même temps.

%%% Gestion des chemins d'accès
\makeatletter
\def\input@path{
    {../Macros/}    % Répertoire des macros personnelles
    {../GraphicsQ/} % Répertoire des images
}
\makeatother

%%% Configuration de base
\documentclass[a4paper, 11pt]{article} % Classe de document
\usepackage[utf8]{inputenc}            % Encodage des caractères
\usepackage[T1]{fontenc}               % Encodage des polices
\usepackage{lmodern}                   % Police vectorielle moderne

%%% Gestion de la langue française (modernisé)
\usepackage[french]{babel}
\frenchsetup{
  StandardLayout = true,       % Typographie standard
  PartNameFull = true,         % Noms complets des parties
  ItemLabels = french,         % Étiquettes françaises
  ThinSpaceInFrenchNumbers=true% Espace fine dans les nombres
}

%%% Mise en page avancée
\usepackage[%
  margin=2cm,            % Marges
  includeheadfoot,       % Inclure en-tête/pied dans la marge
  headheight=15pt        % Hauteur minimale de l'en-tête
]{geometry}

%%% Gestion des paragraphes
\usepackage{parskip}      % Espacement vertical entre paragraphes
\setlength{\parindent}{15pt} % Indentation première ligne
\usepackage{ragged2e}     % Justification améliorée
\setlength{\RaggedRightRightskip}{0pt plus 2em} % Tolérance justification

%%% Mathématiques et sciences
\usepackage{amsmath, amssymb, amsthm}  % Packages mathématiques de base
\usepackage[%
  detect-all,               % Adaptation automatique du contexte
  group-minimum-digits=4,   % Séparation des milliers
  per-mode=symbol,          % Unités avec slash
  exponent-product=\cdot,   % Notation scientifique
  inter-unit-product=\ensuremath{{}\cdot{}} % Séparateur d'unités
]{siunitx}

%%% Gestion des algorithmes
\usepackage[ruled,vlined]{algorithm2e} % Alternative plus moderne
\SetAlFnt{small} % Taille de police
\SetAlCapFnt{\small\itshape} % Police de légende
\SetAlCapNameFnt{\small\bfseries} % Police du titre "Algorithme"
\newcommand{\algorithmeautorefname}{Algorithme} % Compatibilité autoref

%%% Graphiques et couleurs
\usepackage{graphicx} % Inclusion d'images
\usepackage[%
  svgnames,   % Noms de couleurs SVG
  table,       % Couleurs dans les tableaux
  hyperref     % Compatibilité liens
]{xcolor}
\usepackage{booktabs} % Règles horizontales professionnelles
\arrayrulecolor{SeaGreen!70!black} % Couleur des filets
\renewcommand{\arraystretch}{1.3} % Espacement vertical dans les tableaux

%%% Encadrement d'équations
\usepackage[most]{tcolorbox} % Meilleure alternative à empheq
\tcbset{
    colback=LightYellow!10,   % Couleur de fond
    colframe=DarkRed!70!black, % Couleur de bordure
    sharp corners,             % Coins droits
    boxrule=0.8pt,             % Épaisseur de bordure
    left=3pt,                  % Marge intérieure gauche
    right=3pt,
    top=3pt,
    bottom=3pt,
}

%%% Légendes et sous-légendes
\usepackage[%
  font=small,         % Taille de police
  labelfont=bf,       % Police du label (gras)
  textfont=it,        % Police du texte (italique)
  justification=raggedright,
  singlelinecheck=false
]{caption}
\captionsetup[table]{name=Tableau} % Personnalisation nom "Tableau"
\captionsetup[figure]{skip=5pt}    % Espace après légende

%%% Gestion des références croisées
\usepackage[%
  colorlinks=true,      % Liens colorés
  linkcolor=MidnightBlue,
  citecolor=ForestGreen,
  urlcolor=DarkOrchid,
  pdfencoding=auto,
  psdextra,
  bookmarksdepth=3
]{hyperref}
\usepackage{cleveref} % Références intelligentes
\crefname{algorithm}{algorithme}{algorithmes}

%%% Améliorations typographiques
\usepackage{microtype}      % Optimisations typo subtiles
\usepackage[autostyle]{csquotes} % Citations améliorées

%%% Annexes
\usepackage[%
  toc,        % Ajout dans la table des matières
  page,       % Page séparée
  title,      % Titre "Annexes"
  titletoc,   % Titre dans la TdM
  header      % En-tête
]{appendix}

%%% Configuration des numérotations
\numberwithin{equation}{section}
\numberwithin{figure}{section}
\numberwithin{table}{section}
\numberwithin{algorithm}{section}

%%% Commandes personnelles pour équations
\newcommand{\tequation}[1]{\begin{equation}\tcbhighmath{#1}\end{equation}}
\newcommand{\talign}[1]{\begin{tcolorbox}[ams equation]\vspace{-1.2\baselineskip}#1\end{tcolorbox}}
